<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ariel Fontes - AI Chat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        
        .chat-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .chat-header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .profile-info {
            background: rgba(255,255,255,0.1);
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
            font-size: 12px;
        }
        
        .api-key-section {
            background: rgba(255,255,255,0.1);
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
        }
        
        .api-key-section input {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 5px;
            margin-top: 5px;
            font-size: 12px;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 85%;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin-left: auto;
            text-align: right;
        }
        
        .bot-message {
            background: white;
            color: #333;
            border: 1px solid #e9ecef;
        }
        
        .error-message {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ffcdd2;
        }
        
        .chat-input {
            display: flex;
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .chat-input input:focus {
            border-color: #667eea;
        }
        
        .chat-input button {
            margin-left: 10px;
            padding: 12px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: transform 0.2s;
        }
        
        .chat-input button:hover {
            transform: translateY(-2px);
        }
        
        .chat-input button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            display: none;
            padding: 12px 18px;
            background: white;
            border-radius: 18px;
            color: #666;
            font-style: italic;
            margin-bottom: 15px;
        }
        
        .clear-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .clear-btn:hover {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <button class="clear-btn" onclick="clearChat()">Limpar</button>
            <h1>üë®‚Äçüíº Ariel Fontes</h1>
            <p>Program Manager & Consultant</p>
            <div class="profile-info">
                üìç S√£o Paulo, Brazil | üèÄ Basketball | üå≥ Bonsai | ‚úàÔ∏è Travel
            </div>
            <div class="api-key-section">
                <label for="apiKey">OpenAI API Key:</label>
                <input type="password" id="apiKey" placeholder="Cole sua OpenAI API Key aqui...">
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                Ol√°! Sou Ariel Fontes, Program Manager com experi√™ncia em consultoria, analytics e tecnologia. 
                Para usar o chatbot com IA, insira sua OpenAI API Key acima.
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            Ariel est√° digitando...
        </div>
        
        <div class="chat-input">
            <input type="text" id="messageInput" placeholder="Fa√ßa uma pergunta sobre minha carreira..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()" id="sendButton">Enviar</button>
        </div>
    </div>

    <script>
        let conversationHistory = [];
        
        // Ariel's system prompt (simulating the app.py system prompt)
        const systemPrompt = `You are acting as Ariel Fontes. You are answering questions on Ariel Fontes' website, 
        particularly questions related to Ariel Fontes' career, background, skills and experience. 
        Your responsibility is to represent Ariel Fontes for interactions on the website as faithfully as possible. 
        You are given a summary of Ariel Fontes' background which you can use to answer questions. 
        Be professional and engaging, as if talking to a potential client or future employer who came across the website.

        ## Summary:
        My name is Ariel Fontes. I'm a Program Manager with a background in consulting and a strong focus on analytics, technology, and internal operations. I'm originally from S√£o Paulo, Brazil.
        I'm passionate about basketball, bonsai trees, and traveling. I enjoy fast-paced environments and projects that bring structure and clarity to complex problems. While I'm deeply involved in data and strategy, I still believe the best ideas often come over good conversation ‚Äî ideally while eating sushi or something spicy.

        With this context, please chat with the user, always staying in character as Ariel Fontes.`;

        async function callOpenAI(message) {
            const apiKey = document.getElementById('apiKey').value.trim();
            
            if (!apiKey) {
                throw new Error('Por favor, insira sua OpenAI API Key primeiro.');
            }

            const messages = [
                { role: "system", content: systemPrompt },
                ...conversationHistory,
                { role: "user", content: message }
            ];

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: 'gpt-4o-mini',
                    messages: messages,
                    max_tokens: 300,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(`Erro da OpenAI: ${error.error?.message || 'Erro desconhecido'}`);
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        function addMessage(message, isUser = false, isError = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : isError ? 'error-message' : 'bot-message'}`;
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'block';
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'none';
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Disable input and button
            input.disabled = true;
            sendButton.disabled = true;
            
            // Add user message
            addMessage(message, true);
            input.value = '';
            
            // Add to conversation history
            conversationHistory.push({ role: "user", content: message });
            
            // Show typing indicator
            showTyping();
            
            try {
                // Call OpenAI
                const response = await callOpenAI(message);
                
                // Add bot response
                addMessage(response, false);
                conversationHistory.push({ role: "assistant", content: response });
                
            } catch (error) {
                addMessage(`Erro: ${error.message}`, false, true);
            } finally {
                hideTyping();
                input.disabled = false;
                sendButton.disabled = false;
                input.focus();
            }
        }

        function clearChat() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '<div class="message bot-message">Ol√°! Sou Ariel Fontes, Program Manager com experi√™ncia em consultoria, analytics e tecnologia. Como posso ajud√°-lo hoje?</div>';
            conversationHistory = [];
        }
    </script>
</body>
</html> 